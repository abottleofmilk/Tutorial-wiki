
GUI用户界面的优势是通过可视化的界面元素为用户提供便利的操作，界面上的按钮、编辑框等各种界面组件其实都是通过绘图而得到的。Qt的二维绘图基本功能是使用QPainter在绘图设备上绘图，绘图设备包括QWidget、QPixmap等，通过绘制一些基本的点、线、圆等基本形状组成自己需要的图形，得到的图形是不可交互操作的图形。Qt还提供了Graphics View架构，使用QGraphicsView、QGraphicsScene和各种QGraphicsItem类绘图，在一个场景中可以绘制大量图件，且每个图件是可选择、可交互的，如同矢量图编辑软件那样可以操作每个图件。Graphics View架构为用户绘制复杂的组件化图形提供了便利。

## 渐变
渐变是绘图中很常见的一种功能，简单来说就是可以把几种颜色混合在一起，让它们能够自然地过渡，而不是一下子变成另一种颜色。渐变一般是用在填充里面的，所以，设置渐变是在QBrush里面。Qt 提供了三种渐变：线性渐变（QLinearGradient）、辐射渐变（QRadialGradient）和角度渐变（QConicalGradient）。从左到右依次为：线性渐变、辐射渐变、角度渐变。

![](https://cdn.staticaly.com/gh/abottleofmilk/CDN@master/img/20221204155622.png)

### 线性渐变

## 坐标系统和坐标变换

## Graphics View绘图架构
Graphics View架构主要由3个部分组成，即场景、视图和图形项。

![](https://s2.loli.net/2022/12/05/84nOyzq6VxTApeX.png)

> 1. 场景

QGraphicsScene类提供绘图场景（Scene）。场景是不可见的，是一个抽象的管理图形项的容器，可以向场景添加图形项，获取场景中的某个图形项等。

场景主要具有如下一些功能：提供管理大量图形项的快速接口；将事件传播给每个图形项；管理每个图形项的状态，例如选择状态、焦点状态等；管理未经变换的渲染功能，主要用于打印。

除了图形项之外，场景还有背景层和前景层，通常由QBrush指定，也可以通过重新实现drawBackground()和drawForeground()函数来实现自定义的背景和前景，实现一些特殊效果。

> 2. 视图

QGraphicsView 提供绘图的视图（View）组件，用于显示场景中的内容。可以为一个场景设置几个视图，用于对同一个数据集提供不同的视口。

缺省情况下，当视图大于场景时，场景在视图的中间部分显示，也可以设置视图的Alignment属性控制场景在视图中的显示位置；当视图小于场景时视图只能显示场景的一部分内容，但是会自动提供卷滚条在整个场景内移动。视图接收键盘和鼠标输入并转换为场景事件，并进行坐标转换后传送给可视场景。

> 3. 图形项

图形项（Graphics Item）就是一些基本的图形元件，图形项的基类是QGraphicsItem。Qt提供了一些基本的图形项，如绘制椭圆的QGraphicsEllipseItem、绘制矩形的QGraphicsRectItem、绘制文字的QGraphicsTextItem等。

QGraphicsItem支持如下的一些操作：支持鼠标事件响应，包括鼠标按下、移动、释放、双击，还包括鼠标停留、滚轮、快捷菜单等事件；支持键盘输入，按键事件；支持拖放操作；支持组合，可以是父子项关系组合，也可以是通过QGraphicsItemGroup类进行组合。

所以，图形项可以被选择、拖放、组合，若编写信号槽函数代码，还可以实现各种编辑功能。一个图形项还可以包含子图形项，图形项还支持碰撞检测，即是否与其他图形项碰撞。

### Graphics View的坐标系统
Graphics View系统有3个有效的坐标系，图形项坐标、场景坐标、视图坐标。绘图的时候，场景的坐标等价于QPainter的逻辑坐标，一般以场景的中心为原点；视图坐标与设备坐标相同，是物理坐标，缺省以左上角为原点；图形项坐标是局部逻辑坐标，一般以图件的中心为原点。

![](https://s2.loli.net/2022/12/05/FMQRIJ3XveZSPCh.png)

### Graphics View相关的类